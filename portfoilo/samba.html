<head>
    <link rel="stylesheet" href="assets/css/homelab.css">
</head>

<main class="container forum-layout">
    <section id="background">
        <nav class="top-nav">
            <ul class="top-nav__list">
                <li><a href="#section1">Initalising</a></li>
                <li><a href="#section2">Downloading and Configuring samba</a></li>
               
            </ul>
        </nav>

        <section class="content">
            <div id="section1" class="section">
                <div class="section__header">
                    <h1>Setting up SAMBA for NAS</h1>
                    <br>
                    <h2 class="section__title">Extending the storage</h2>
                        <span class="section__subtitle"></span>
                </div>
                <div class="d-grid">
                    <p>When setting up linux unbuntu server the, size of storage it intialally gives the user is about
                        100GB, sotred in the SDA3 partition</p>

                    <p>We can extend this the storage space by using 2 commands</p>
                    <p><code>sudo lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv</code></p>
                    <p>Where:</p>
                    <ul>
                        <li><code>lvextend</code> commands to extend the logical volume managed by the LVM</li>
                        <li><code>-l 100%FREE</code>Use 100 percent of the free remaining space</li>
                        <li><code>/dev/ubuntu-vg/ubuntu-lv</code> Where the logical volume is stored</li>
                    </ul>
                    <p><b>THIS DOES NOT RESIZE THE FILESYSTEM YET, just the volume container</b></p>
                    <p><code>sudo resize2fs /dev/ubuntu-vg/ubuntu-lv</code></p>
                    <p>Where:</p>
                    <ul>
                        <li><code>resize2fs</code> resizes the file system to match the underlying block device.</li>
                        <li><code>/dev/ubuntu-vg/ubuntu-lv</code> The logical volume whose filesystem youâ€™re resizing.
                        </li>


                    </ul>

                    <img src="assets/img/projects/building-homelab/nas/resize.jpg" alt="" class="centered-img">
                        <i class="caption">Written commands for paritioning.</i>

                </div>

                <div id="section2" class="section">
                    <div class="section__header">
                        <h2 class="section__title">Setting up SAMBA</h2>
                        <span class="section__subtitle">Setting and initalising samba</span>
                    </div>
                    <div class="d-grid">
                        <h3><u>Creating the shared directory</u></h3>
                        <p>After installing samba we can make a folder that everyone can acess</p>
                        <p>1. Make a directory inside under <code>/srv/samba/shared</code>, /srv/ is a folder desigined
                            especially to store
                            service data, which the NAS comes under</p>
                        <p>2. Change the ownership of the file of <code>/srv/samba/shared</code>, to
                            <code>nobody:nogroup</code>, this way permissions to access the folder shouldnt be asked.
                        </p>
                        <p>3. We change the directory permissions or the -rwxs, this is represented using an octal,
                            where each each converted digit to binary represents the rwx values respectively. Using
                            <code>sudo chmod 0775 /srv/samba/shared</code>, it changes the read write execute
                            permissions so that other people or guests can read and execute</p>
                        <img src="assets/img/projects/building-homelab/nas/sambaconfig.jpg" alt="" class="centered-img">
                        <i class="caption">Written commands</i>
                        

                        <h3><u>Configuring SAMBA</u></h3>
                        <p><code><pre>
            [Shared]
                path = /srv/samba/shared
                browseable = yes
                read only = no
                guest ok = yes
                create mask = 0664
                directory mask = 0775
                </pre>
o           </code>
                        </p>We add this to <code>/etc/samba/smb.conf</code> where the path tells samba the storage
                        location, browseable allows the files to be viewed, read only set tno allows the users to upload
                        and execute the file.
                        The directory mask sets the permissions sthat a new directory can have for example other people
                        here can on read and execute, (execute in the diretory allows travsersals NOT file execution!).
                        The create mask here is permissions for what files can have here other people can read only.</p>


                        <p><code>
                <pre>
            [global]
                netbios name = basecserver
                workgroup = WORKGROUP
                server string = Server on basecserver
                </pre>
            </code></p>

                        <p>Set the netbios name to any name, this allows windows to label the drive on other clients.
                            The server string provides a description for the drive.</p>


                        <h3><u>Configuring SAMBA for windows</u></h3>
                        <p>When running windows 11 for SAMBA, Microsoft disables insecure guest logins by default</p>
                        <p>In powershell running this
                            command<code>Set-SmbClientConfiguration -EnableInsecureGuestLogons $true</code>allows us to
                            access the drive as a user</p>


                        <p> <code>
                        <pre>
            [global]
                server signing = mandatory
                client signing = mandatory
                smb encrypt = required
                server min protocol = SMB3_11
                client min protocol = SMB3_11
                        </pre>
            </code></p>
                        <p>Sever message block is for netowrk ports between nodes on a network </p>
                        <p>With digital signing, we set the client and the server to set up sigantures to ensure that
                            the data hasnt been tampered wwith, minamising man in the middle attacks and relay attacks
                            using cryptography</p>
                        
                        <p>In windows we map a new drive, with the file location being
                            <code>basecserver/Shared</code>(The direcotry name Shared comes from the label [Shared] in
                            the conf file)</p>
                      
                        

                        <img src="assets/img/projects/building-homelab/nas/name.jpg" alt="" class="centered-img">
                        <i class="caption">Mapping the drive.</i>
                    </div>
                </div>

                
        </section>
    </section>
</main>